import{Tea as e}from"./models/tea.js";import{TeaController as t}from"./controllers/teaController.js";import{UserController as o}from"./controllers/userController.js";console.clear(),await t.loadTeasFromJSON(),await o.loadUser(),console.log(o.users),t.updateCartCount();let n=window.location.pathname.split("/").pop(),l=document.getElementById("login-btn");console.log(localStorage.getItem("userName")),null!==localStorage.getItem("userName")&&"null"!==localStorage.getItem("userName")?(l.textContent=localStorage.getItem("userName"),l.href="profile.html"):(l.textContent="Login",l.href="login.html"),"index.html"==n||""==n?t.renderThreeTeas(document.getElementById("main-page-container-for-teas")):"store.html"==n?(t.renderTeas(document.getElementById("container-for-teas")),t.renderNamesForFilter(),document.getElementById("filter-btn").addEventListener("click",(()=>{t.renderTeas(document.getElementById("container-for-teas"))}))):"cart.html"==n?t.renderTeasInBasket(document.getElementById("cart-container")):"login.html"==n?document.getElementById("login-form").addEventListener("submit",(e=>{o.signIn(e)})):"register.html"==n?document.getElementById("register-form").addEventListener("submit",(e=>{o.signUp(e)})):"profile.html"==n&&(null==localStorage.getItem("userName")&&(window.location.href="login.html"),document.getElementById("welcomeProfile").textContent="Welcome "+localStorage.getItem("userName"),document.getElementById("emailProfile").textContent="Your email: "+localStorage.getItem("userEmail"),document.getElementById("log-out-btn").addEventListener("click",(()=>{o.logOut()}))),document.querySelectorAll(".add-to-basket-btn").forEach((e=>{e.addEventListener("click",(e=>{const o=parseInt(e.target.getAttribute("data-tea-id")),n=t.getTeaById(o);t.addTeaToBasket(n),t.updateCartCount()}))}));